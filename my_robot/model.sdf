<?xml version='1.0'?>
<sdf version='1.4'>
  <model name="my_robot">

<!-- Rectangular Base  -->
    <link name='chassis'>
      <pose>-0.2 0 .1 0 0 0</pose>

      <!-- inertia -->
      <inertial>
        <mass>20.0</mass>
        <pose>-0.1 0 -0.1 0 0 0</pose>
        <inertia>
          <ixx>0.5</ixx>
          <iyy>1.0</iyy>
          <izz>0.1</izz>
        </inertia>
      </inertial>
      
      <!-- collison mesh -->
      <collision name='collision'>
        <geometry>
          <box>
            <size>.9 .2 .1</size>
          </box>
        </geometry>
      </collision>
      
      <!-- size -->
      <visual name='visual'>
        <geometry>
          <box>
            <size>0.9 .2 .1</size>
          </box>
        </geometry>
      </visual>

      <!-- Top of car fixed to base -->
      <!-- collison mesh -->
      <collision name='top_box_collision'>
      <pose>0.2 0 .1 0 0 0</pose>
        <geometry>
          <box>
            <size>.9 .2 .1</size>
          </box>
        </geometry>
      </collision>
      
      <!-- size -->
      <visual name='visual'>
        <geometry>
          <box>
            <size>0.9 .2 .1</size>
          </box>
        </geometry>
      </visual>

      <!--center caster_wheel -->
      <collision name='caster_collision'>
        <pose>-0.15 0 0.05 0 0 0</pose>
        <geometry>
            <sphere>
            <radius>.05</radius>
          </sphere>
        </geometry>

        <!-- Friction of castor wheel -->
        <surface>
          <friction>
            <ode>
              <mu>0</mu>
              <mu2>0</mu2>
              <slip1>1.0</slip1>
              <slip2>1.0</slip2>
            </ode>
          </friction>
        </surface>
      </collision>

      <!-- size of castor wheel -->
      <visual name='caster_visual'>
        <pose>-0.15 0 0.05 0 0 0</pose>
        <geometry>
          <sphere>
            <radius>.07</radius>
          </sphere>
        </geometry>
      </visual>

    </link>

    <!--rear-Left Wheeel -->
    <link name="left_wheel">
      <pose>0.1 0.13 0.1 0 1.5707 1.5707</pose>


      <collision name="collision">
        <geometry>
          <cylinder>
            <radius>.1</radius>
            <length>.05</length>
          </cylinder>
        </geometry>
      </collision>

      <visual name="visual">
        <geometry>
          <cylinder>
            <radius>.1</radius>
            <length>.05</length>
          </cylinder>
        </geometry>
      </visual>
      </link>
    
    <!--rear-Right Wheel -->
    <link name="right_wheel">
      <pose>0.1 -0.13 0.1 0 1.5707 1.5707</pose>
      <collision name="collision">
        <geometry>
          <cylinder>
            <radius>.1</radius>
            <length>.05</length>
          </cylinder>
        </geometry>
      </collision>

      <visual name="visual">
        <geometry>
          <cylinder>
            <radius>.1</radius>
            <length>.05</length>
          </cylinder>
        </geometry>
      </visual>
    </link>

    <!-- Hinge-rear left wheel -->
    <joint type="revolute" name="left_wheel_hinge">
      <pose>0 0 -0.03 0 0 0</pose>
      <child>left_wheel</child>
      <parent>chassis</parent>
      <axis>
        <xyz>0 1 0</xyz>
      </axis>
    </joint>


    <!-- Hinge-rear right wheel -->
    <joint type="revolute" name="right_wheel_hinge">
      <pose>0 0 0.03 0 0 0</pose>
      <child>right_wheel</child>
      <parent>chassis</parent>
      <axis>
        <xyz>0 1 0</xyz>
      </axis>
    </joint>


    <!-- Front Left Wheeel -->
    <link name="front_left_wheel">
      <pose>-0.5 0.13 0.1 0 1.5707 1.5707</pose>


      <collision name="collision">
        <geometry>
          <cylinder>
            <radius>.1</radius>
            <length>.05</length>
          </cylinder>
        </geometry>
      </collision>

      <visual name="visual">
        <geometry>
          <cylinder>
            <radius>.1</radius>
            <length>.05</length>
          </cylinder>
        </geometry>
      </visual>
      </link>
    
    <!-- Front Right Wheel -->
    <link name="front_right_wheel">
      <pose>-0.5 -0.13 0.1 0 1.5707 1.5707</pose>
      <collision name="collision">
        <geometry>
          <cylinder>
            <radius>.1</radius>
            <length>.05</length>
          </cylinder>
        </geometry>
      </collision>


      <visual name="visual">
        <geometry>
          <cylinder>
            <radius>.1</radius>
            <length>.05</length>
          </cylinder>
        </geometry>
      </visual>
    </link>

    <!-- Hinge- Front left wheel -->
    <joint type="revolute" name="front_left_wheel_hinge">
      <pose>0 0 -0.13 0 0 0</pose>
      <child>front_left_wheel</child>
      <parent>chassis</parent>
      <axis>
        <xyz>0 1 0</xyz>
      </axis>
    </joint>


    <!-- Hinge-Front right wheel -->
    <joint type="revolute" name="front_right_wheel_hinge">
      <pose>0 0 0.13 0 0 0</pose>
      <child>front_right_wheel</child>
      <parent>chassis</parent>
      <axis>
        <xyz>0 1 0</xyz>
      </axis>
    </joint>

  <!-- <plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">
    <alwaysOn>true</alwaysOn>
    <updateRate>${update_rate}</updateRate>
    <leftJoint>front_right_wheel_hinge</leftJoint>
    <rightJoint>front_left_wheel_hinge</rightJoint>
    <wheelSeparation>0.5380</wheelSeparation>
    <wheelDiameter>0.2410</wheelDiameter>
    <torque>20</torque>
    <commandTopic>cmd_vel</commandTopic>
    <odometryTopic>odom</odometryTopic>
    <odometryFrame>odom</odometryFrame>
    <robotBaseFrame>chassis</robotBaseFrame>
  </plugin> -->
  
  <include>
      <uri>model://hokuyo</uri>
      <pose>0.2 0 0.2 0 0 0</pose>
    </include>
    <joint name="hokuyo_joint" type="fixed">
      <child>hokuyo::link</child>
      <parent>chassis</parent>
    </joint>


  <include>
      <uri>model://camera</uri>
      <pose>0.2 0 0.1 0 0 0</pose>
    </include>
    <joint name="camera_joint" type="fixed">
      <child>camera::link</child>
      <parent>chassis</parent>
    </joint>
<!-- 
  <link name="camera_link">
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0" 
    <sensor type="camera" name="camera">
      <update_rate>30.0</update_rate>
      <camera name="head">
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>800</width>
          <height>800</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>300</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <alwaysOn>1</alwaysOn>
      <visualize>1</visualize>
      </sensor> 
      </link>
      <geometry>
    <box size="${camera_link} ${camera_link} ${camera_link}"/>
      </geometry>
    </collision> -->
 <!-- camera -->
  <!-- <gazebo reference="camera_link">
    <sensor type="camera" name="camera1">
      <update_rate>30.0</update_rate>
      <camera name="head">
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>800</width>
          <height>800</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>300</far>
        </clip>
        <noise>
          <type>gaussian</type>
 
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera> -->
      <!-- <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
        <alwaysOn>true</alwaysOn>
        <updateRate>0.0</updateRate>
        <cameraName>rrbot/camera1</cameraName>
        <imageTopicName>image_raw</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <frameName>camera_link</frameName>
        <hackBaseline>0.07</hackBaseline>
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
      </plugin>
    </sensor>
  </gazebo> -->

  </model>
</sdf>
